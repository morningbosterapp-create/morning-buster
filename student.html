<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Morning Booster | Premium Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap');

        :root {
            --bg-deep: #0a0b10;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --accent-primary: #7000ff;
            --accent-secondary: #ff007a;
            --text-glow: 0 0 15px rgba(112, 0, 255, 0.5);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: radial-gradient(circle at 50% 0%, #1a1b26 0%, var(--bg-deep) 100%);
            color: #ffffff;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 35px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
        }

        .bg-glow {
            position: fixed;
            width: 300px;
            height: 300px;
            background: var(--accent-primary);
            filter: blur(120px);
            border-radius: 50%;
            z-index: -1;
            animation: pulse-slow 8s infinite ease-in-out;
        }

        .booster-button {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 25px rgba(112, 0, 255, 0.4);
        }

        .booster-button:active {
            transform: scale(0.92);
            filter: brightness(1.2);
        }

        .nav-item { transition: all 0.3s ease; color: #555; }
        .nav-item.active { color: #ffffff; text-shadow: var(--text-glow); }

        .snap-x-container {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 15px;
            padding: 10px 0;
        }
        .snap-item { scroll-snap-align: start; flex: 0 0 85%; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-32">

    <div class="bg-glow" style="top: -50px; left: -50px; background: var(--accent-secondary);"></div>
    <div class="bg-glow" style="bottom: 50px; right: -50px;"></div>

    <header class="p-8 flex justify-between items-center">
        <div>
            <h4 class="text-xs font-bold text-gray-500 tracking-[0.3em] uppercase mb-1">Morning Booster</h4>
            <div class="flex items-center gap-2">
                <h1 class="text-3xl font-extrabold tracking-tight">Ayubowan, <span id="stuNameDisplay" class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">Student</span></h1>
            </div>
        </div>
        <div class="relative group">
            <div class="w-14 h-14 rounded-[20px] bg-gradient-to-br from-purple-600 to-pink-600 p-[2px] shadow-lg">
                <img src="https://i.pravatar.cc/150?u=nethmina" class="w-full h-full rounded-[18px] object-cover" alt="Profile">
            </div>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-green-500 border-4 border-[#0a0b10] rounded-full"></div>
        </div>
    </header>

    <main class="px-6 space-y-10">

        <section class="glass-card p-1 relative overflow-hidden group">
            <div class="absolute inset-0 bg-gradient-to-br from-purple-600/20 to-transparent opacity-50"></div>
            <div class="p-8 relative z-10">
                <div class="flex justify-between items-start mb-10">
                    <div>
                        <p class="text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-2">Today's Focus</p>
                        <h2 class="text-2xl font-black italic" id="boosterTitle">UNIT: LOADING...</h2>
                    </div>
                    <div class="w-12 h-12 glass-card rounded-2xl flex items-center justify-center">
                        <i class="fas fa-bolt text-yellow-400"></i>
                    </div>
                </div>

                <div class="flex items-end justify-between">
                    <div>
                        <p class="text-3xl font-extrabold tracking-tighter">Booster Paper</p>
                        <p class="text-[10px] text-gray-400 mt-1 italic font-medium">Click below to start your session</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs font-bold px-3 py-1 bg-white/10 rounded-full">Active</span>
                    </div>
                </div>

                <button id="startBoosterBtn" onclick="startBooster()" class="booster-button w-full mt-8 py-5 rounded-[25px] font-extrabold text-sm tracking-widest uppercase flex items-center justify-center gap-3">
                    Start Today Booster <i class="fas fa-play text-[10px]"></i>
                </button>
            </div>
        </section>

        <section id="recoverySection">
            <div class="flex justify-between items-center mb-5">
                <h3 class="text-lg font-extrabold tracking-tight">Recovery Cards <span class="text-pink-500 ml-1">¬∑</span></h3>
                <span class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Swipe <i class="fas fa-arrow-right ml-1"></i></span>
            </div>
            <div id="recoveryContainer" class="snap-x-container no-scrollbar">
                <div class="snap-item glass-card p-6 border-l-4 border-purple-500 flex flex-col justify-between h-44 bg-gradient-to-br from-white/5 to-transparent">
                    <p class="text-sm font-semibold text-gray-200">‡∂¥‡∑è‡∂©‡∂∏‡∑ä ‡∂Ö‡∑Ä‡∑É‡∑è‡∂±‡∂∫‡∑ö ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑î‡∂´‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∂Ø‡∑í‡∑É‡∑ä‡∑Ä‡∑ö.</p>
                </div>
            </div>
        </section>

        <section class="glass-card p-8">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-lg font-extrabold tracking-tight">Your Progress</h3>
                <select class="bg-transparent text-[10px] font-bold text-gray-400 outline-none">
                    <option>This Week</option>
                </select>
            </div>
            <div class="relative h-48">
                <canvas id="mobilePremiumChart"></canvas>
            </div>
        </section>

    </main>

    <nav class="fixed bottom-6 left-6 right-6 z-50">
        <div class="glass-card py-5 px-10 flex justify-between items-center shadow-[0_-10px_50px_rgba(0,0,0,0.8)] border-t border-white/10">
            <button class="nav-item active"><i class="fas fa-th-large text-xl"></i></button>
            <button class="nav-item"><i class="fas fa-graduation-cap text-xl"></i></button>
            <button class="nav-item"><i class="fas fa-fire-alt text-xl"></i></button>
            <button class="nav-item"><i class="fas fa-cog text-xl"></i></button>
        </div>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, get, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD1Kt-b-bb6HhY0k_Yb72MrKZukC0hdm0k",
            authDomain: "morning-boster.firebaseapp.com",
            databaseURL: "https://morning-boster-default-rtdb.firebaseio.com",
            projectId: "morning-boster",
            storageBucket: "morning-boster.firebasestorage.app",
            messagingSenderId: "465023464210",
            appId: "1:465023464210:web:1d53b1bd6185f2603fb9cb"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const studentID = localStorage.getItem("currentStudent");
        const today = new Date().toISOString().split('T')[0];

        let activeQuestion = null;

        // 1. Get Student Info
        if(studentID) {
            get(ref(db, 'users/' + studentID)).then((snap) => {
                if(snap.exists()) {
                    document.getElementById('stuNameDisplay').innerText = snap.val().name;
                }
            });
        }

        // 2. Load Today's Booster
        onValue(ref(db, 'booster/' + today), (snap) => {
            activeQuestion = snap.val();
            if(activeQuestion) {
                document.getElementById('boosterTitle').innerText = "UNIT: " + (activeQuestion.q).substring(0, 15) + "...";
            }
        });

        // 3. Load Recovery Cards
        onValue(ref(db, `users/${studentID}/recovery`), (snap) => {
            const recoveryData = snap.val();
            if(recoveryData) {
                const container = document.getElementById('recoveryContainer');
                container.innerHTML = `
                    <div class="snap-item glass-card p-6 border-l-4 border-pink-500 flex flex-col justify-between h-44 bg-gradient-to-br from-white/5 to-transparent" onclick="alert('‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: ${recoveryData.back}')">
                        <p class="text-sm font-semibold text-gray-200">${recoveryData.front}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-[10px] font-bold text-pink-400">#Recovery</span>
                            <div class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center"><i class="fas fa-eye text-xs"></i></div>
                        </div>
                    </div>
                `;
            }
        });

        // 4. Start Booster Logic
        window.startBooster = function() {
            if(!activeQuestion) return alert("‡∂Ö‡∂Ø ‡∂Ø‡∑í‡∂±‡∂ß ‡∂≠‡∑Ä‡∂∏‡∂≠‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª ‡∂±‡∑ê‡∂≠.");
            
            const userAnswer = prompt(activeQuestion.q + "\n\n‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±:");
            if(userAnswer == activeQuestion.a) {
                alert("‡∑Ä‡∑í‡∑Å‡∑í‡∑Ç‡∑ä‡∂ß‡∂∫‡∑í! ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í. üéâ");
            } else {
                alert("‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! ‡∂∏‡∑ô‡∂∫ ‡∂î‡∂∂‡∂ú‡∑ö Recovery Cards ‡∑Ä‡∂Ω‡∂ß ‡∂ë‡∂ö‡∂≠‡∑î ‡∑Ä‡∑î‡∂´‡∑è.");
                // Add to Recovery
                set(ref(db, `users/${studentID}/recovery`), {
                    front: activeQuestion.q,
                    back: activeQuestion.a
                });
            }
        }

        // Chart Implementation
        const ctx = document.getElementById('mobilePremiumChart').getContext('2d');
        const gradient = ctx.createLinearGradient(0, 0, 0, 200);
        gradient.addColorStop(0, 'rgba(112, 0, 255, 0.4)');
        gradient.addColorStop(1, 'rgba(112, 0, 255, 0)');

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['M', 'T', 'W', 'T', 'F', 'S', 'S'],
                datasets: [{
                    data: [45, 52, 48, 70, 65, 85, 92],
                    borderColor: '#7000ff',
                    borderWidth: 3,
                    pointRadius: 0,
                    tension: 0.45,
                    fill: true,
                    backgroundColor: gradient
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { display: false }, ticks: { color: '#444', font: { size: 9, weight: 'bold' } } },
                    y: { display: false }
                }
            }
        });
    </script>
</body>
</html>
